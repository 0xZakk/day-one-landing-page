---
// Import the global CSS file with Tailwind directives
import '../styles/global.css';

// Script for Lucide icons
const currentYear = new Date().getFullYear();
const currentPage = Astro.url.pathname;

// Declare lucide for TypeScript
declare global {
	interface Window {
		lucide: {
			createIcons: () => void;
		};
	}
}
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<!-- Favicon -->
		<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
		<link rel="icon" type="image/x-icon" href="/assets/img/favicon/favicon.ico">
		<link rel="manifest" href="/site.webmanifest">
		<!-- End Favicon -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="preload" href="/assets/fonts/DepartureMono-Regular.woff2" as="font" type="font/woff2" crossorigin>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
		<script src="https://unpkg.com/lucide@latest"></script>
		<meta name="generator" content={Astro.generator} />
		<title>Day One Academy</title>
	</head>
	<body
		class="m-0 min-h-screen min-w-[320px] bg-[#ffffff] font-mono text-base font-normal text-[#1C1C1C] dark:bg-[#242424] dark:text-[#E5E5E5]"
	>
		<!-- Navbar -->
		<nav class="fixed top-6 left-0 right-0 z-50 flex justify-center">
			<!-- Mobile hamburger menu button -->
			<button id="mobileMenuButton" class="fixed top-6 right-6 z-[60] block md:hidden bg-[#3D4A3A] text-white p-2 rounded-full shadow-lg">
				<i data-lucide="menu" id="hamburgerIcon"></i>
				<i data-lucide="x" id="closeIcon" style="display: none;"></i>
			</button>
			
			<!-- Mobile full-screen menu -->
			<div id="mobileMenu" class="fixed inset-0 bg-[#3D4A3A] z-[55] flex flex-col items-start justify-center px-12 hidden md:hidden">
				<ul class="w-full space-y-16">
					{currentPage !== '/' && <li><a href="/" class="block text-4xl text-[#E5E5E5] hover:text-[#D4A73A] transition-colors uppercase font-departure" style="color: #E5E5E5 !important;">Home</a></li>}
					{currentPage !== '/courses' && <li><a href="/courses" class="block text-4xl text-[#E5E5E5] hover:text-[#D4A73A] transition-colors uppercase font-departure" style="color: #E5E5E5 !important;">Courses</a></li>}
					{currentPage !== '/newsletter' && <li><a href="/newsletter" class="block text-4xl text-[#E5E5E5] hover:text-[#D4A73A] transition-colors uppercase font-departure" style="color: #E5E5E5 !important;">Newsletter</a></li>}
					{currentPage !== '/community' && <li><a href="/community" class="block text-4xl text-[#E5E5E5] hover:text-[#D4A73A] transition-colors uppercase font-departure" style="color: #E5E5E5 !important;">Community</a></li>}
					{currentPage !== '/about' && <li><a href="/about" class="block text-4xl text-[#E5E5E5] hover:text-[#D4A73A] transition-colors uppercase font-departure" style="color: #E5E5E5 !important;">About</a></li>}
				</ul>
			</div>
			
			<!-- Desktop menu -->
			<div class="bg-[#3D4A3A]/90 backdrop-blur-md rounded-full px-2 py-2 shadow-lg flex items-center relative overflow-hidden hidden md:flex">
				<div class="hover-indicator absolute h-8 bg-[#D4A73A]/25 rounded-full transition-all duration-300 ease-in-out opacity-0 pointer-events-none"></div>
				{currentPage !== '/' && <a href="/" class="relative px-5 py-2 text-[#E5E5E5] hover:text-[#D4A73A] transition-colors z-10 nav-link uppercase" style="color: #E5E5E5 !important;">Home</a>}
				{currentPage !== '/courses' && <a href="/courses" class="relative px-5 py-2 text-[#E5E5E5] hover:text-[#D4A73A] transition-colors z-10 nav-link uppercase" style="color: #E5E5E5 !important;">Courses</a>}
				{currentPage !== '/newsletter' && <a href="/newsletter" class="relative px-5 py-2 text-[#E5E5E5] hover:text-[#D4A73A] transition-colors z-10 nav-link uppercase" style="color: #E5E5E5 !important;">Newsletter</a>}
				{currentPage !== '/community' && <a href="/community" class="relative px-5 py-2 text-[#E5E5E5] hover:text-[#D4A73A] transition-colors z-10 nav-link uppercase" style="color: #E5E5E5 !important;">Community</a>}
				{currentPage !== '/about' && <a href="/about" class="relative px-5 py-2 text-[#E5E5E5] hover:text-[#D4A73A] transition-colors z-10 nav-link uppercase" style="color: #E5E5E5 !important;">About</a>}
			</div>
		</nav>

		<!-- Main content slot -->
		<slot />

		<!-- Footer -->
		<footer class="bg-[#3D4A3A] text-[#E5E5E5] py-16">
			<div class="container mx-auto px-8">
				<div class="grid grid-cols-1 md:grid-cols-2 gap-12">
					<div>
						<h2 class="text-2xl font-bold mb-6 text-white font-departure">It's Day One Somewhere</h2>
						<ul class="space-y-3">
							<li><a href="/courses" class="text-[#D4A73A] hover:text-[#e8bc51] transition-colors no-underline" style="color: #D4A73A;">Courses</a></li>
							<li><a href="#" class="text-[#D4A73A] hover:text-[#e8bc51] transition-colors no-underline" style="color: #D4A73A;">Newsletter</a></li>
							<li><a href="#" class="text-[#D4A73A] hover:text-[#e8bc51] transition-colors no-underline" style="color: #D4A73A;">Community</a></li>
						</ul>
					</div>
					
					<div>
						<h3 class="text-xl font-semibold mb-4 text-white font-departure">Subscribe to our newsletter</h3>
						<p class="mb-4 text-[#E5E5E5]">Get the latest updates on new courses and experiments.</p>
						<form class="flex flex-col lg:flex-row gap-3">
							<input 
								type="email" 
								placeholder="Your email address" 
								class="px-4 py-3 rounded-lg bg-[#2D362B] border border-[#5A6B57] focus:outline-none focus:border-[#D4A73A] text-[#E5E5E5] flex-grow"
								required
							>
							<button 
								type="submit" 
								class="px-6 py-3 bg-[#D4A73A] text-white font-medium rounded-lg hover:bg-[#c29732] transition-colors cursor-pointer uppercase"
							>
								Subscribe
							</button>
						</form>
					</div>
				</div>
				
				<div class="mt-12 pt-8 border-t border-[#5A6B57] text-center text-[#E5E5E5]">
					<div class="flex flex-col sm:flex-row gap-1 sm:gap-2 items-center justify-center">
						<div>&copy; {currentYear}</div>
						<div class="hidden sm:block">â€¢</div>
						<div>Day One Academy. All rights reserved.</div>
					</div>
				</div>
			</div>
		</footer>

		<script>
			// Script for Lucide icons
			document.addEventListener('DOMContentLoaded', function() {
				if (typeof window.lucide !== 'undefined') {
					window.lucide.createIcons();
				}
			});

			// Desktop menu hover effect
			const navLinks = document.querySelectorAll('.nav-link');
			const hoverIndicator = document.querySelector('.hover-indicator');
			
			if (hoverIndicator instanceof HTMLElement) {
				navLinks.forEach(link => {
					link.addEventListener('mouseenter', function(this: HTMLElement) {
						if (hoverIndicator instanceof HTMLElement) {
							const linkRect = this.getBoundingClientRect();
							const navRect = this.parentElement?.getBoundingClientRect() || new DOMRect();
							
							hoverIndicator.style.width = `${linkRect.width}px`;
							hoverIndicator.style.left = `${linkRect.left - navRect.left}px`;
							hoverIndicator.style.opacity = '1';
						}
					});
				});
			}
			
			const navbar = document.querySelector('nav > div.hidden');
			if (navbar) {
				navbar.addEventListener('mouseleave', function() {
					if (hoverIndicator instanceof HTMLElement) {
						hoverIndicator.style.opacity = '0';
					}
				});
			}
			
			// Mobile menu toggle
			const mobileMenuButton = document.getElementById('mobileMenuButton');
			const mobileMenu = document.getElementById('mobileMenu');
			const hamburgerIcon = document.getElementById('hamburgerIcon');
			const closeIcon = document.getElementById('closeIcon');
			
			if (mobileMenuButton && mobileMenu) {
				mobileMenuButton.addEventListener('click', function() {
					// Toggle menu visibility
					if (mobileMenu.classList.contains('hidden')) {
						mobileMenu.classList.remove('hidden');
						if (hamburgerIcon instanceof HTMLElement) hamburgerIcon.style.display = 'none';
						if (closeIcon instanceof HTMLElement) closeIcon.style.display = 'block';
						document.body.classList.add('overflow-hidden');
					} else {
						mobileMenu.classList.add('hidden');
						if (hamburgerIcon instanceof HTMLElement) hamburgerIcon.style.display = 'block';
						if (closeIcon instanceof HTMLElement) closeIcon.style.display = 'none';
						document.body.classList.remove('overflow-hidden');
					}
				});
			}
		</script>
	</body>
</html>

<!-- Removed the global styles since Tailwind will handle this -->
